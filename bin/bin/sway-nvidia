#!/usr/bin/env sh

sway_nvidia() {
    GBM_BACKEND=nvidia-drm \
    __GLX_VENDOR_LIBRARY_NAME=nvidia \
    __GL_GSYNC_ALLOWED=0 \
    __GL_VRR_ALLOWED=0 \
    WLR_NO_HARDWARE_CURSORS=1 \
    WLR_RENDERER=vulkan \
    WLR_DRM_NO_ATOMIC=1 \
    GDK_BACKEND=wayland \
    MOZ_ENABLE_WAYLAND=1 \
    QT_AUTO_SCREEN_SCALE_FACTOR=1 \
    QT_QPA_PLATFORM=wayland \
    QT_WAYLAND_DISABLE_WINDOWDECORATION=1 \
    XDG_CURRENT_DESKTOP=sway \
    sway --unsupported-gpu -d &>/tmp/sway.log
}

sway_nvidia "$@"
