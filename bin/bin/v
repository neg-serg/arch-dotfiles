#!/usr/bin/env dash
if which nvr 2>&1 >/dev/null; then
    if [ ! -z $DISPLAY ]; then
        send 'circle next nwim'
        while ! xdotool search --sync --all --class '^nwim$' 2>&1 > /dev/null; do
            :;
        done
    fi
    if [ $# -eq 0 ]; then
        exit 1
    else
        nvr --servername localhost:7777 +':if &buftype == "terminal" | :quit | :endif'
    fi
    nvr --servername localhost:7777 """$@"""
else
    ${EDITOR:-vi} "$@"
fi
